function decodeEntities(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function CKupdate(){for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement();return!0}function recaptchacallback(){var e=$("#accept_captcha").attr("data-pub-key");grecaptcha.render("hidden_captcha",{sitekey:e,callback:function(e){console.log(e)}})}jQuery.fn.outerHTML=function(){return this[0]?this[0].outerHTML:""},jQuery.fn.scrollMinimal=function(e){var t=this.offset().top,a=this.outerHeight(!0),i=$(window).scrollTop(),n=$(window).height();t<i?e?$("body").animate({scrollTop:t},"slow","swing"):$(window).scrollTop(t):t+a>i+n&&(e?$("body").animate({scrollTop:t-n+a},"slow","swing"):$(window).scrollTop(t-n+a))};var getUrlParameter=function(e){var t,a,i=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e)return void 0===t[1]||t[1]};function setCookie(e,t,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var n="expires="+i.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"}function $_GET(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,a,i){t[a]=void 0!==i?i:""}),e?t[e]?t[e]:null:t}function disableFunction(){document.getElementById("send").disabled="true"}function validateEmail(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)}function resetFormElement(e){e.wrap("<form>").closest("form").get(0).reset(),e.unwrap()}function countchars(){jQuery("#count").text("Tagline Characters: "+jQuery("#tagline").val().length)}jQuery.fn.highlight=function(){$(this).each(function(){var e=$(this);$("<div/>").width(e.width()).height(e.height()).css({position:"absolute",left:e.offset().left,top:e.offset().top,"background-color":"#f4f4b7",opacity:".6","z-index":"9999999"}).appendTo("body").fadeOut(1e3).queue(function(){$(this).remove()})})};var slug_enabled=!1,current_url=$(location).attr("pathname")+$(location).attr("search");if("/admin.php?module=add_article"==current_url)slug_enabled=!0;function slug(e){if(e=e||0,1==slug_enabled||1==e){var t=document.getElementById("title").value;$.ajax({type:"POST",url:"/includes/ajax/slug.php",datatype:"text",data:{title:t},success:function(e){$("#slug").val(e)}})}}$(function(){$("#slug_edit").on("click",function(e){e.preventDefault(),slug_enabled=!1,document.getElementById("slug").removeAttribute("readonly")})}),$(function(){$("#slug_update").on("click",function(e){e.preventDefault(),slug(1)})}),$(function(){$(document).on("click",".trash",function(){var e=$(this).attr("id");$.ajax({type:"POST",url:"/includes/ajax/delete_image.php",data:{image_id:e},success:function(t){"YES"==t?($("div[id='"+e+"']").replaceWith('<div class="col-md-12" style="background-color: #15e563; padding: 5px;">Image Deleted</div>'),$(".uploads-"+e).val()&&$(".uploads-"+e).remove(),$("html, body").animate({scrollTop:$("#preview").offset().top},0)):alert("can't delete the row")}})})}),$(function(){$(document).on("click",".trash_tagline",function(){var e=$(this).attr("id");$.ajax({type:"POST",url:"/includes/ajax/delete_tagline_image.php",data:{image_id:e},success:function(t){"YES"==t?($("div[id='"+e+"']").replaceWith('<div class="col-md-12" style="background-color: #15e563; padding: 5px;">Image Deleted</div>'),$("html, body").animate({scrollTop:$("#preview2").offset().top},0)):alert("can't delete the row")}})})}),jQuery(document).ready(function(){var e=function(e){var t,a,i=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e)return void 0===t[1]||t[1]};$(".remove_announce").on("click",function(e){e.preventDefault();var t=$(this).attr("data-announce-id"),a=$(this).attr("data-days"),i=30;void 0!==a&&!1!==a&&(i=a),setCookie("gol_announce_"+t,"set",i),$(this).closest(".announce").hide()}),$(document).on("click",".toggle-nav > a",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".toggle-nav").children(".toggle-content");t.hasClass("toggle-active")?$(t).removeClass("toggle-active"):($(".toggle-content").removeClass("toggle-active"),$(t).addClass("toggle-active"))}),$(document).click(function(e){$(e.target).is("#search-button-nav .toggle-content .search-field")||$(e.target).is("#search-button-nav .toggle-content")||$(".toggle-content").removeClass("toggle-active")});var t=/^\s*[a-zA-Z0-9-_]+\s*$/;$(".keyup-char").keyup(function(){$("span.error-keyup-1").hide();var e=$(this).val();t.test(e)?$(this).parent().find(".register-warning").hide():$(this).parent().find(".register-warning").show()}),$(".keyup-char-email").keyup(function(){$("div.error-keyup-1").hide(),$("div.error-keyup-2").hide(),validateEmail($(this).val())?($(this).parent().find(".register-warning").hide(),$(this).parent().find(".all-ok").show()):($(this).parent().find(".register-warning").show(),$(this).parent().find(".all-ok").hide())}),$.isFunction($.fn.select2)&&($("#articleCategories").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/categories_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$("#gpu_picker").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/gpu_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_usernames").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_usernames.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_user_groups").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_user_groups.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_modules").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_modules.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}));new Clipboard(".btn");$("form").areYouSure();var a=2;$("#add-poll").click(function(){$("#pquestion").prop("disabled",!1),$(".poll-option").prop("disabled",!1),$("#addButton").prop("disabled",!1),$("#removeButton").prop("disabled",!1),$("#create-poll").show()}),$("#delete-poll").click(function(){$("#pquestion").prop("disabled",!0),$(".poll-option").prop("disabled",!0),$("#addButton").prop("disabled",!0),$("#removeButton").prop("disabled",!0),$("#create-poll").hide()}),$("#addButton").click(function(){a++;var e=$(document.createElement("div")).attr("id","TextBoxDiv"+a);e.after().html('<input type="text" name="poption[]" class="poll-option" id="option'+a+'" value="" />'),e.appendTo("#TextBoxesGroup")}),$("#removeButton").click(function(){$("#TextBoxDiv"+a).remove(),a--}),$(document).on("click",".collapse_header",function(){$header=$(this),$content=$header.next(),$content.slideToggle(500)}),$("#tagline").length>0&&(countchars(),jQuery("#tagline").mousedown(countchars),jQuery("#tagline").keyup(countchars)),$("#title").length>0&&1==slug_enabled&&(slug(),jQuery("#title").mousedown(slug),jQuery("#title").keyup(slug)),$("#photoimg").off("click").on("change",function(){$("#imageform").ajaxForm({beforeSubmit:function(){$("#imageloadstatus").show(),$("#imageloadbutton").hide()},success:function(e){$.each(e.data,function(t){$("#uploaded_media").append(e.data[t].output),$("#article_editor").append('<input class="uploads-'+e.data[t].media_id+'" type="hidden" name="uploads[]" value="'+e.data[t].media_id+'" />'),$("#imageloadstatus").hide(),$("#imageloadbutton").show(),resetFormElement($("#photoimg"))})},error:function(e){$("#uploaded_media").append(e),$("#imageloadstatus").hide(),$("#imageloadbutton").show(),resetFormElement($("#photoimg"))}}).submit()}),$("#photoimg2").off("click").on("change",function(){$("#imageform2").ajaxForm({target:"#preview2",beforeSubmit:function(){$("#imageloadstatus2").show(),$("#imageloadbutton2").hide()},success:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))},error:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))}}).submit()}),$(".like-button").show(),$(document).on("click",".likebutton",function(){var e=$(this).parents(".comment")[0],t=$(this).attr("data-id"),a=$(this).attr("data-author-id"),i=$(this).attr("data-article-id"),n=$(this).attr("data-type"),o=$(this);$.post("/includes/ajax/like.php",{comment_id:t,author_id:a,article_id:i,type:n,sta:o.find("span").text().toLowerCase()},function(a){if("liked"==a.result){var i=(s=$("#"+t+" div.likes")).find(".total_likes"),n=s.find(".who-likes"),l=', <a class="who_likes" data-fancybox data-type="ajax" href="javascript:;" data-src="/includes/ajax/who_likes.php?comment_id='+t+'">Who?</a>';i.text(a.total),n.html(l),"none"==$(s).css("display")&&s.show(),$(e).find(".likebutton span").text("Unlike").removeClass("like").addClass("unlike")}else if("unliked"==a.result){var s;i=(s=$("#"+t+" div.likes")).find(".total_likes"),n=s.find(".who-likes"),l="";a.total>0?(l=', <a class="who_likes" data-fancybox data-type="ajax" href="javascript:;" data-src="/includes/ajax/who_likes.php?comment_id='+t+'">Who?</a>',i.text(a.total),n.html(l)):s.hide(),$(e).find(".likebutton span").text("Like").removeClass("unlike").addClass("like")}else"nope"==a.result&&o.qtip({content:{text:'You need to be <a href="/index.php?module=login">logged in</a> to like a post. Or <a href="/index.php?module=register">register</a> to become a GOL member'},position:{my:"bottom center",at:"top center"},style:{classes:"qtip-bootstrap qtip-shadow"},hide:{delay:2e3},show:!0})})}),$(document).on("click",".likearticle",function(){var e=$(this).parents(".article_likes")[0],t=$(this).attr("data-id"),a=$("#article-likes"),i=$(this).attr("data-type"),n=$(this);$.post("/includes/ajax/like.php",{article_id:t,type:i,sta:n.find("span").text().toLowerCase()},function(i){if("liked"==i.result){var o=a.html().replace(" Likes",""),l="";(o=parseInt(o)+1)>0&&(l=', <a class="who_likes" data-fancybox data-type="ajax" href="javascript:;" data-src="/includes/ajax/who_likes.php?article_id='+t+'">Who?</a>'),$("#who-likes-article").html(l),a.html(o+" Likes"),$(e).find(".likearticle span").text("Unlike").removeClass("like").addClass("unlike")}if("unliked"==i.result){o=a.html().replace(" Likes",""),l="";(o=parseInt(o)-1)>0&&(l=', <a class="who_likes" data-fancybox data-type="ajax" href="javascript:;" data-src="/includes/ajax/who_likes.php?article_id='+t+'">Who?</a>'),$("#who-likes-article").html(l),a.html(o+" Likes"),$(e).find(".likearticle span").text("Like").removeClass("unlike").addClass("like")}else"nope"==i.result&&n.qtip({content:{text:'You need to be <a href="/index.php?module=login">logged in</a> to like a post. Or <a href="/index.php?module=register">register</a> to become a GOL member'},position:{my:"bottom center",at:"top center"},style:{classes:"qtip-bootstrap qtip-shadow"},hide:{delay:2e3},show:!0})})}),$(".bookmark-content").click(function(e){e.preventDefault();var t=$(this).data("id"),a=$(this).data("type"),i=$(this).data("method"),n=$(this).data("page"),o=$(this).data("parent-id"),l=$(this);$.post("/includes/ajax/bookmark-content.php",{id:t,type:a,method:i,parent_id:o},function(e){"added"==e.result?(l.data("method","remove"),l.addClass("bookmark-saved"),l.attr("title","Remove Bookmark")):(e.result="removed")&&("usercp"!=n?(l.data("method","add"),l.removeClass("bookmark-saved"),l.attr("title","Bookmark")):"usercp"==n&&l.parent().parent().parent().fadeOut(500))})});$(".delete_notification").click(function(e){e.preventDefault();var t=$(this).data("note-id");$.post("/includes/ajax/delete-notification.php",{note_id:t},function(e){1==(e=JSON.parse(e)).result&&($("#note-"+t).find("span").remove(),$("#note-"+t).fadeOut(500))})});function i(t,a){var i=window.location.href,n=window.location.host;if(-1!=i.indexOf(n+"/admin.php?module=reviewqueue")||-1!=i.indexOf(n+"/admin.php?module=articles&view=Submitted")||-1!=i.indexOf(n+"/admin.php?module=articles&view=Submitted")){t.preventDefault();var o=a.attr("data-page"),l=e("aid");return $(".comments").load("/includes/ajax/article_comment_pagination.php",{type:"reload",article_id:l,page:o},function(){$(".comments").scrollMinimal(),$(".comments").highlight()}),!0}return!1}$(".poll_content").on("click",".close_poll",function(){var e=$(this).data("poll-id");$.post("/includes/ajax/close_poll.php",{poll_id:e},function(t){1==t.result?($(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e}),window.alert("Poll closed!")):2==t.result&&window.alert("Sorry, I am unable to do that.")})}),$(".poll_content").on("click",".open_poll",function(){var e=$(this).data("poll-id");$.post("/includes/ajax/open_poll.php",{poll_id:e},function(t){1==t.result?($(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e}),window.alert("Poll opened!")):2==t.result?($(".poll_content").load("/includes/ajax/poll_options.php",{poll_id:e}),window.alert("Poll opened!")):3==t.result&&window.alert("Sorry, I am unable to do that.")})}),$(".poll_content").on("click",".results_button",function(){var e=$(this).data("poll-id");$(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e})}),$(".poll_content").on("click",".poll_button_vote",function(){var e=$(this),t=$(this).data("poll-id"),a=$(this).data("option-id");$.post("/includes/ajax/poll_vote.php",{poll_id:t,option_id:a},function(a){1==a.result?$(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:t}):2==a.result?window.alert("Sorry, but voting is closed!"):3==a.result?window.alert("Sorry, but you have already voted in this poll!"):(e.text("Try again later, something broke").attr("disabled","disabled"),setTimeout(function(){e.removeAttr("disabled")},2e3))})}),$(".poll_content").on("click",".back_vote_button",function(){var e=$(this).data("poll-id");$(".poll_content").load("/includes/ajax/poll_options.php",{poll_id:e})}),$(document).on("click","#claim_key",function(e){e.preventDefault();var t=$(this).attr("data-game-id");$.post("/includes/ajax/claim_key.php",{giveaway_id:t},function(e){1==e.result&&$("#key-area").text("Here's your key: "+e.key),3==e.result&&$("#key-area").text("You have to login to redeem a key!")})}),$(document).on("click","#pc_info_update",function(e){e.preventDefault(),$.post("/includes/ajax/pc-info-update.php",function(e){1==e.result&&($("#pc_info_done").show(),$("#pc_info_done").html("<br />Thank you, your PC info has been updated!"))})}),$(".votebutton").click(function(){var e=$(this),t=$(this).data("category-id"),a=$(this).data("game-id");$.post("/includes/ajax/goty/goty_vote.php",{category_id:t,game_id:a},function(t){1==t.result?($(e).html("Vote Saved!"),$(e).addClass("vote_done"),$.fancybox.open({src:"#wrap",type:"inline"})):2==t.result?(document.getElementById("wrap").innerHTML="Sorry, but voting is closed!",$.fancybox.open({src:"#wrap",type:"inline"})):3==t.result?(document.getElementById("wrap").innerHTML="Sorry, but you have already voted in this category!",$.fancybox.open({src:"#wrap",type:"inline"})):(e.text("Try again later, something broke").attr("disabled","disabled"),setTimeout(function(){e.removeAttr("disabled")},2e3))})}),$("#generate_preview").click(function(){var e=$(this).data("article-id");$.post("/includes/ajax/generate_preview_code.php",{article_id:e}).done(function(e){$("#preview_code").val(e)})}),$(document).on("click","#subscribe-link",function(e){e.preventDefault();var t=$(this).attr("data-sub"),a=$(this).attr("data-article-id");$.post("/includes/ajax/subscribe-article.php",{type:t,"article-id":a},function(e){var t=JSON.parse(e);"subscribed"==t.result?($("#subscribe-link").attr("data-sub","unsubscribe"),$("#subscribe-link").attr("href","/index.php?module=articles_full&amp;go=unsubscribe&amp;article_id="+a),$("#subscribe-link span").text("Unsubscribe from comments")):"unsubscribed"==t.result&&($("#subscribe-link").attr("data-sub","subscribe"),$("#subscribe-link").attr("href","/index.php?module=articles_full&amp;go=subscribe&amp;article_id="+a),$("#subscribe-link span").text("Subscribe to comments"))})}),$(document).on("click",".show_blocked",function(e){e.preventDefault();var t=$(this).attr("data-comment-id");$(".hidden_comment.r"+t).show(),$(".hidden_comment.r"+t).highlight(),$(this).addClass("hide_blocked").removeClass("show_blocked"),$(this).children("span").addClass("minus").removeClass("plus")}),$(document).on("click",".hide_blocked",function(e){e.preventDefault();var t=$(this).attr("data-comment-id");$(".hidden_comment.r"+t).fadeOut(500),$(this).addClass("show_blocked").removeClass("hide_blocked"),$(this).children("span").addClass("plus").removeClass("minus")}),$(document).on("click",".gallery_item",function(){var e=$(this).data("filename"),t=$(this).data("id");if(0==$("#draft_id").length)var a=0;else a=$("#draft_id").val();$("#preview2").html('<img src="/uploads/tagline_gallery/'+e+'" alt="image" />'),$.fancybox.close(),$.post("/includes/ajax/gallery_tagline_sessions.php",{id:t,filename:e,draft_id:a})}),$(document).on("click","#preview_text_button",function(){var e=$(".bbcode_editor").val();$(".pm_text_preview").load("/includes/ajax/call_bbcode.php",{text:e},function(){$(".preview_pm").show(),$("#preview").scrollMinimal(),$(".preview_pm").highlight()})}),$(".admin_article_comment_button").click(function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({type:"POST",url:"/includes/ajax/article_comment_pagination.php",dataType:"json",data:$("#admin_comment").serialize(),success:function(e){"done"==e.result&&($(".comments").load("/includes/ajax/article_comment_pagination.php",{type:"reload",article_id:e.article_id,page:e.page},function(){$(t).removeClass("dirty"),$(".comments #r"+e.comment_id).scrollMinimal(),$(".comments").highlight()}),$("#comment").val("")),"error"==e.result&&alert(e.message)}}).done(function(){$(".admin_article_comment_button").prop("disabled",!1)})}),$(".send_admin_comment").click(function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({type:"POST",url:"/includes/ajax/admin/admin_home_comment.php",dataType:"json",data:t.serialize(),success:function(e){"done"==e.result?($(t).removeClass("dirty"),$("."+e.type+"_text").val(""),$("."+e.type+"_comments_list").html(e.text),$("."+e.type+"_comments_div").highlight()):alert(e.message)}})}),$(document).on("click",".send_editor_plan",function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({type:"POST",url:"/includes/ajax/admin/editor_plans.php",dataType:"json",data:t.serialize()+"&type=add_plan",success:function(e){"done"==e.result?($(t).removeClass("dirty"),$(".editor_plans_box").html(e.text),$(".editor_plans_content").highlight()):alert(e.message)}})}),$(document).on("click",".delete_editor_plan",function(e){e.preventDefault();var t=$(this).data("note-id"),a=$(this).data("owner-id");$.ajax({type:"POST",url:"/includes/ajax/admin/editor_plans.php",dataType:"json",data:{note_id:t,owner_id:a,type:"remove"},success:function(e){"done"==e.result?$("#plan-"+t).fadeOut(500):alert(e.message)}})}),$(document).on("click",".conflict_confirmed",function(e){var t=$(this).closest("form");$.ajax({type:"POST",url:"/includes/ajax/admin/article_conflict_session.php",dataType:"json",data:t.serialize(),success:function(e){"done"==e.result?$(".box.warning.message").fadeOut(500):alert(e.message)}})}),$(document).on("click","ul.pagination li a, .head-list-position a",function(e){i(e,$(this))}),$(document).on("change",".head-list-position select, .pagination",function(e){if(!i(e,$(this).find(":selected"))){var t=$(this).val();t&&(window.location=t)}}),$("#preview_chart").click(function(){var e=document.getElementById("chart_form"),t=new FormData(e);$.ajax({url:"/includes/ajax/preview_chart.php",data:t,cache:!1,processData:!1,contentType:!1,type:"POST",success:function(e){$(".chart_preview").html(e)}})});var n=$(".labels").length,o=$(".colours").length,l=$(".data").length;$(document).on("click","#add_label",function(){n++,o++,l++,$("#label_container").append('<div id="label-'+n+'" class="input-field box fleft" style="width: 50%"><span class="addon">Label #'+n+':</span><input type="text" class="labels" name="labels[]" placeholder="label '+n+'" /></div><div id="colour-'+n+'" class="input-field box fleft" style="width: 50%"><span class="addon">Colour #'+n+':</span><input class="colours" type="text" name="colours[]" placeholder="#ffffff" /></div>'),1==$("#chart_grouped").prop("checked")?$("#data_container").append('<div id="data-'+l+'" class="box">Data for Label #'+l+'<textarea class="data" name="data[]" cols="100" rows="10"></textarea></div>'):$("#data_container").append('<div id="data-'+l+'" class="box">Data for Label #'+l+'<input class="data" type="text" name="data[]" /></div>')}),$(document).on("click","#remove_label",function(){$("#label-"+n).remove(),$("#colour-"+o).remove(),$("#data-"+l).remove(),n--,o--,l--}),$(document).on("click","#chart_grouped",function(){1==$(this).prop("checked")?$("input.data").each(function(){var e=$(this).attr("name"),t=$(document.createElement("textarea")).attr("class","data").attr("name",e).attr("rows",10);$(this).replaceWith(t)}):$("textarea.data").each(function(){var e=$(this).attr("name"),t=$(document.createElement("input")).attr("class","data").attr("name",e).attr("type","text");$(this).replaceWith(t)})}),$(".admin_preview_article").click(function(e){e.preventDefault(),CKupdate();"none"==$("#article_preview").css("display")?$.ajax({type:"POST",url:"/includes/ajax/admin/preview_article.php",data:$("#article_editor").serialize(),success:function(e){$("#article_preview").html(e),$("#article_preview").show(),$(".admin_preview_article").html("Close Preview"),$("#article_preview").scrollMinimal()}}):($("#article_preview").hide(),$(".admin_preview_article").html("Preview"))}),$(document).on("click",".quote_function",function(e){e.preventDefault();var t=$(this).attr("data-id"),a=$(this).attr("data-type");$.ajax({type:"POST",url:"/includes/ajax/quote_comment.php",dataType:"json",data:{id:t,type:a},success:function(e){if("done"==e.result){content="[quote="+e.username+"]"+decodeEntities(e.text),content+="[/quote]";var t=$("#comment").val();$("#comment").val(t+content),$("#comment").scrollMinimal()}"error"==e.result&&alert(e.message)}})}),$(document).on("click",".insert_tagline_image",function(e){e.preventDefault();var t=$(".tagline-image").attr("href");CKEDITOR.instances.ckeditor_gol.insertHtml('<p style="text-align:center"><img src="'+t+'" /></p>')}),$(document).on("click",".uploads .add_button",function(e){var t=$(this).data("url"),a=$(this).data("type");"video"==a&&CKEDITOR.instances.ckeditor_gol.insertHtml('<div class="ckeditor-html5-video" style="text-align: center;"><video controls="controls" src="'+t+'">&nbsp;</video></div>'),"audio"==a?CKEDITOR.instances.ckeditor_gol.insertHtml('<div class="ckeditor-html5-audio" style="text-align: center;"><audio controls="controls" src="'+t+'">&nbsp;</audio></div>'):CKEDITOR.instances.ckeditor_gol.insertHtml('<p style="text-align:center"><a href="'+t+'" data-fancybox="images"><img src="'+t+'" /></a></p>')}),$(document).on("click",".uploads .add_thumbnail_button",function(e){var t=$(this).data("url"),a=$(this).data("main-url");CKEDITOR.instances.ckeditor_gol.insertHtml('<p style="text-align:center"><a href="'+a+'" data-fancybox="images"><img src="'+t+'" /></a></p>')}),$(document).on("click",".uploads .add_static_button",function(e){var t=$(this).data("url-gif"),a=$(this).data("url-static");CKEDITOR.instances.ckeditor_gol.insertHtml('<p style="text-align:center"><a href="'+t+'" class="img_anim" target="_blank"><img src="'+a+'" /></a></p>')}),$(document).on("click","#self-submit",function(e){var t=$("#submitter-username").text(),a=CKEDITOR.instances.ckeditor_gol,i=a.createRange();i.moveToElementEditEnd(i.root),a.insertHtml('<p>&nbsp;</p><p style="text-align:right"><em>With thanks to the original submission from '+t+"!</em></p>","html",i)}),$(document).on("click",".logout_link",function(e){e.preventDefault(),confirm("Are you sure you want to logout?")&&(window.location="/index.php?Logout")}),$("#comment_form").on("keydown",function(e){e.ctrlKey&&13===e.keyCode&&$("#comment_form").trigger("submit")});var s="<em>Click to view long quote </em>",r=$(".comment_quote").length;$(".comment_quote").each(function(e){var t=$(this).text(),a=$(this).outerHTML();if(t.length>600){var i=$(this).find("cite").first().text(),n="";"Quote"!=i&&(n="from "+i);var o='<span class="morecontent">'+a+'</span><a href="" class="morelink">'+s+n+"</a><br />";$(this).replaceWith(o)}if(e+1===r&&window.location.hash){var l=window.location.hash.substring(1);l.indexOf("r")>=0&&$("#"+l)[0].scrollIntoView()}}),$(".morelink").click(function(){var e=$(this).prev().find("cite").first().text(),t="";return"Quote"!=e&&(t="from "+e),$(this).hasClass("less")?($(this).removeClass("less"),$(this).html(s+t)):($(this).addClass("less"),$(this).html("<em>Click to hide long quote </em>"+t)),$(this).prev().toggle(),!1});var c=$("#articleGames").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/games_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2});$(".clear-games").on("click",function(e){e.preventDefault(),c.val(null).trigger("change")}),$(".genres_picker").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/gamesdb/game_genres_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$("#game-wishlist-select").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/games_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(document).on("click",".sales-pagination li a",function(e){e.preventDefault();var t=$("#game_filters"),a=$(this).attr("data-page");$.ajax({type:"GET",url:"/includes/ajax/sales/display_normal.php",data:{filters:t.serialize(),page:a},success:function(e){$(t).removeClass("dirty"),$("div.normal-sales").html(e),$("div.normal-sales").highlight(),$("div.normal-sales").scrollMinimal(),$("#sale-search").easyAutocomplete(sale_search_options)}})}),$(document).on("click",".change_wishlist",function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-type"),i=$(this).attr("data-game-id");$.ajax({type:"GET",url:"/includes/ajax/sales/wishlist.php",data:{type:a,game_id:i},success:function(e){"Added"==e.message?(t.html("&#9733;"),t.attr("data-type","remove"),t.highlight()):"Removed"==e.message&&(t.html("&#9734;"),t.attr("data-type","add"),t.highlight())}})}),$(document).on("change","#game_filters",function(e){var t,a,i=$("#game_filters"),n=i.attr("name");if("free"==n)var o="/includes/ajax/gamesdb/display_free.php",l="free-list";else if("sales"==n){o="/includes/ajax/sales/display_normal.php",l="normal-sales";void 0!==$_GET("game_id")&&(t=$_GET("game_id")),$("#sale-search").val().length>0&&(a=$("#sale-search").val())}else if("hidden_steam"==n)o="/includes/ajax/gamesdb/display_hidden_steam.php",l="free-list";$.ajax({type:"GET",url:o,data:{filters:i.serialize(),game_id:t,q:a},success:function(e){$(i).removeClass("dirty"),$("div."+l).html(e),$("div."+l).highlight(),$("#sale-search").easyAutocomplete(sale_search_options)}})}),$(document).on("click","#sale-search-form div.eac-item",function(e){e.preventDefault();var t=$("#game_filters"),a=$(this).text();$.ajax({type:"GET",url:"/includes/ajax/sales/display_normal.php",data:{q:a,filters:t.serialize()},success:function(e){$("div.normal-sales").html(e),$("div.normal-sales").highlight(),$("#sale-search").easyAutocomplete(sale_search_options)}})}),$(document).on("click",".filter-title .filter-link",function(){$header=$(this),$content=$header.closest(".filter-box").find(".filter-content"),$content.slideToggle(500),$header.closest(".filter-box").find("span").toggleClass("caret-down caret-right")}),$("#small_pic").off("click").on("change",function(){$("#small_pic").ajaxForm({target:"#preview2",beforeSubmit:function(){$("#imageloadstatus2").show(),$("#imageloadbutton2").hide()},success:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))},error:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))}}).submit()}),$(document).on("click",".free-games-pagination li a",function(e){e.preventDefault();var t=$("#game_filters"),a=$(this).attr("data-page");$.ajax({type:"GET",url:"/includes/ajax/gamesdb/display_free.php",data:{page:a,filters:t.serialize()},success:function(e){$("div.free-list").html(e),$("div.free-list").highlight(),$("div.free-list").scrollMinimal(),$("#free-search").easyAutocomplete(free_search_options)}})}),$(document).on("click","#free-search-form div.eac-item",function(e){e.preventDefault();var t=$(this).text();$.ajax({type:"GET",url:"/includes/ajax/gamesdb/display_free.php",data:{q:t},success:function(e){$("div.free-list").html(e),$("div.free-list").highlight(),$("#free-search").easyAutocomplete(free_search_options)}})});$(".game_picker").select2({selectOnClose:!0,width:"100%",ajax:{url:function(){return"games"==$(this).data("picker")?"/includes/ajax/games_ajax.php":"devs"==$(this).data("picker")?"/includes/ajax/gamesdb/search_devs.php":void 0},dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2});$(document).on("click",".img_anim",function(e){e.preventDefault();var t=$(this).attr("href"),a=$(this).find("img:first-child"),i=$(this).find("img:first-child").attr("src");if(-1!==i.indexOf("jpg")){a.css({opacity:.3});var n=$('<div class="gif-loader"></div>');n.css({position:"relative",display:"inline-block",width:a.width(),height:a.height(),backgroundPosition:"center center",backgroundImage:"url(/templates/default/images/bigloader.gif)",backgroundRepeat:"no-repeat"}),a.wrap(n),$('<img src="'+t+'">').on("load",function(){a.closest(".gif-loader").replaceWith('<img src="'+t+'" />')})}else a.attr("src",i.replace(".gif","_static.jpg"))}),$(document).on("click",".delete_comment",function(e){e.preventDefault();var t=$(this).attr("data-comment-id");confirm("Are you sure you wish to delete that comment?")&&$.post("/includes/ajax/delete_comment.php",{comment_id:t},function(e){"removed"==e.result&&$(".r"+t).fadeOut(500)})}),$(document).on("click",".delete_forum_post",function(e){e.preventDefault();var t=$(this).attr("data-post-id"),a=$(this).attr("data-type");confirm("Are you sure you wish to delete that forum post?")&&$.post("/includes/ajax/delete_forum_post.php",{post_id:t,type:a},function(e){"removed"==e.result&&("reply"==a?$(".r"+t).fadeOut(500):"topic"==a&&(window.location.href="/forum/"+e.forum_id))})}),$(document).on("click",".accept_video",function(e){e.preventDefault();var t=$(this).attr("data-video-id");$(this).closest(".hidden_video").replaceWith('<div class="youtube-embed-wrapper" style="position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden"><iframe allowfullscreen="" frameborder="0" height="360" src="https://www.youtube-nocookie.com/embed/'+t+'?rel=0" style="position:absolute;top:0;left:0;width:100%;height:100%" width="640"></iframe></div>')}),$(document).on("click","#youtube-cookie-slider",function(e){this.checked?(Cookies.set("gol_youtube_consent","yup",{expires:30}),$(".youtube_status_text").text("On")):($("#youtube-cookie-slider").prop("checked",!1),$(".youtube_status_text").text("Off"),Cookies.set("gol_youtube_consent","nope",{expires:30}))}),$(".reg-button").attr("disabled",!0),$(document).on("change","#policy_agree, #spam_list",function(e){$("#policy_agree").is(":checked")&&$("#spam_list").is(":checked")?$(".reg-button").attr("disabled",!1):$(".reg-button").attr("disabled",!0)}),$(document).on("click","#accept_captcha",function(e){$.getScript("https://www.google.com/recaptcha/api.js?onload=recaptchacallback&render=explicit")}),$(document).on("click",".load_admin_notifications",function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-last-id");$.ajax({type:"GET",url:"/includes/ajax/admin/load_notifications.php",data:{last_id:a},success:function(e){"done"==e.result&&($(".notifications-list").append(e.text),t.attr("data-last-id",e.last_id),0==e.total_left&&t.replaceWith("None left!"))}})})});