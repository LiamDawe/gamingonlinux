function setCookie(e,t,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}function disableFunction(){document.getElementById("send").disabled="true"}function validateEmail(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)}function resetFormElement(e){e.wrap("<form>").closest("form").get(0).reset(),e.unwrap()}function countchars(){jQuery("#count").text("Tagline Characters: "+jQuery("#tagline").val().length)}function slug(e){if(e=e||0,1==slug_enabled||1==e){var t=document.getElementById("title").value;$.ajax({type:"POST",url:"/includes/ajax/slug.php",datatype:"text",data:{title:t},success:function(e){$("#slug").val(e)}})}}jQuery.fn.scrollMinimal=function(e){var t=this.offset().top,a=this.outerHeight(!0),i=$(window).scrollTop(),o=$(window).height();t<i?e?$("body").animate({scrollTop:t},"slow","swing"):$(window).scrollTop(t):t+a>i+o&&(e?$("body").animate({scrollTop:t-o+a},"slow","swing"):$(window).scrollTop(t-o+a))};var getUrlParameter=function(e){var t,a,i=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e)return void 0===t[1]||t[1]};jQuery.fn.highlight=function(){$(this).each(function(){var e=$(this);$("<div/>").width(e.width()).height(e.height()).css({position:"absolute",left:e.offset().left,top:e.offset().top,"background-color":"#ffff99",opacity:".7","z-index":"9999999"}).appendTo("body").fadeOut(1e3).queue(function(){$(this).remove()})})};var slug_enabled=!1,current_url=$(location).attr("pathname")+$(location).attr("search");if("/admin.php?module=add_article"==current_url)var slug_enabled=!0;$(function(){$("#slug_edit").on("click",function(e){e.preventDefault(),slug_enabled=!1,document.getElementById("slug").removeAttribute("readonly")})}),$(function(){$("#slug_update").on("click",function(e){e.preventDefault(),slug(1)})}),$(function(){$(document).on("click",".trash",function(){var e=$(this).attr("id");$.ajax({type:"POST",url:"/includes/ajax/delete_image.php",data:{image_id:e},success:function(t){"YES"==t?($("div[id='"+e+"']").replaceWith('<div class="col-md-12" style="background-color: #15e563; padding: 5px;">Image Deleted</div>'),$("html, body").animate({scrollTop:$("#preview").offset().top},0)):alert("can't delete the row")}})})}),$(function(){$(document).on("click",".trash_tagline",function(){var e=$(this).attr("id");$.ajax({type:"POST",url:"/includes/ajax/delete_tagline_image.php",data:{image_id:e},success:function(t){"YES"==t?($("div[id='"+e+"']").replaceWith('<div class="col-md-12" style="background-color: #15e563; padding: 5px;">Image Deleted</div>'),$("html, body").animate({scrollTop:$("#preview2").offset().top},0)):alert("can't delete the row")}})})}),jQuery(document).ready(function(){function e(e,a){var i=window.location.href,o=window.location.host;if(-1!=i.indexOf(o+"/admin.php?module=reviewqueue")||-1!=i.indexOf(o+"/admin.php?module=articles&view=Submitted")||-1!=i.indexOf(o+"/admin.php?module=articles&view=Submitted")){e.preventDefault();var n=a.attr("data-page"),l=t("aid");return $(".comments").load("/includes/ajax/article_comment_pagination.php",{type:"reload",article_id:l,page:n},function(){$(".comments").scrollMinimal(),$(".comments").highlight()}),!0}return!1}var t=function(e){var t,a,i=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e)return void 0===t[1]||t[1]};if(window.location.hash){var a=window.location.hash.substring(1),i=t("module");void 0===i&&(to_check={"users/statistics":"statistics"},$.each(to_check,function(e,t){if(window.location.href.indexOf(e)>-1);})),void 0!==i&&"statistics"==i&&("trends"==a?($("#trends").show(),$("#monthly").hide()):"monthly"==a&&($("#trends").hide(),$("#monthly").show()))}$(".remove_announce").on("click",function(e){e.preventDefault(),setCookie("gol_announce_"+$(this).attr("data-announce-id"),"set",60),$(this).closest(".announce").hide()}),$("#trends_link").on("click",function(e){e.preventDefault(),document.location.hash="#trends",$("#trends").show(),$("#monthly").hide()}),$("#monthly_link").on("click",function(e){e.preventDefault(),document.location.hash="#monthly",$("#trends").hide(),$("#monthly").show()}),$(".toggle-nav > a").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".toggle-nav").children(".toggle-content");t.hasClass("toggle-active")?$(t).removeClass("toggle-active"):($(".toggle-content").removeClass("toggle-active"),$(t).addClass("toggle-active"))}),$(document).on("click",function(){$(".toggle-content").removeClass("toggle-active")});var o=/^\s*[a-zA-Z0-9-_]+\s*$/;$(".keyup-char").keyup(function(){$("span.error-keyup-1").hide();var e=$(this).val();o.test(e)?$(this).parent().find(".register-warning").hide():$(this).parent().find(".register-warning").show()}),$(".keyup-char-email").keyup(function(){$("div.error-keyup-1").hide(),$("div.error-keyup-2").hide(),validateEmail($(this).val())?($(this).parent().find(".register-warning").hide(),$(this).parent().find(".all-ok").show()):($(this).parent().find(".register-warning").show(),$(this).parent().find(".all-ok").hide())}),$.isFunction($.fn.select2)&&($("#articleCategories").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/categories_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$("#gpu_picker").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/gpu_ajax.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_usernames").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_usernames.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_user_groups").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_user_groups.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}),$(".call_modules").select2({selectOnClose:!0,width:"100%",ajax:{url:"/includes/ajax/call_modules.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{id:e.id,text:e.text}})}},cache:!0},minimumInputLength:2}));new Clipboard(".btn");$(".fancybox-thumb").fancybox({prevEffect:"none",nextEffect:"none",helpers:{title:{type:"outside"},thumbs:{width:50,height:50}}}),$(".computer_deets").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"60%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none"}),$(".post_link").on("click",function(e){e.preventDefault();var t=$(this).attr("data-post-id"),a=$(this).attr("data-type");console.log(t),$.fancybox({maxWidth:800,maxHeight:300,fitToView:!1,width:"70%",height:"28%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",title:null,href:"/includes/ajax/call_post_link.php?post_id="+t+"&type="+a,type:"ajax"})}),$(".who_likes").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"60%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none"}),$(".gallery_tagline").fancybox({fitToView:!1,width:"80%",height:"80%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",autoCenter:!1}),$("form").areYouSure();var n=2;$("#add-poll").click(function(){$("#pquestion").prop("disabled",!1),$(".poll-option").prop("disabled",!1),$("#addButton").prop("disabled",!1),$("#removeButton").prop("disabled",!1),$("#create-poll").show()}),$("#delete-poll").click(function(){$("#pquestion").prop("disabled",!0),$(".poll-option").prop("disabled",!0),$("#addButton").prop("disabled",!0),$("#removeButton").prop("disabled",!0),$("#create-poll").hide()}),$("#addButton").click(function(){n++;var e=$(document.createElement("div")).attr("id","TextBoxDiv"+n);e.after().html('<input type="text" name="poption[]" class="poll-option" id="option'+n+'" value="" />'),e.appendTo("#TextBoxesGroup")}),$("#removeButton").click(function(){$("#TextBoxDiv"+n).remove(),n--}),$(document).on("click",".collapse_header",function(){$header=$(this),$content=$header.next(),$content.slideToggle(500)}),$("#tagline").length>0&&(countchars(),jQuery("#tagline").mousedown(countchars),jQuery("#tagline").keyup(countchars)),$("#title").length>0&&1==slug_enabled&&(slug(),jQuery("#title").mousedown(slug),jQuery("#title").keyup(slug)),$(".fancybox").fancybox(),$("#photoimg").off("click").on("change",function(){$("#imageform").ajaxForm({beforeSubmit:function(){$("#imageloadstatus").show(),$("#imageloadbutton").hide()},success:function(e){$("#preview").append(e),$("#imageloadstatus").hide(),$("#imageloadbutton").show(),resetFormElement($("#photoimg"))},error:function(e){$("#preview").append(e),$("#imageloadstatus").hide(),$("#imageloadbutton").show(),resetFormElement($("#photoimg"))}}).submit()}),$("#photoimg2").off("click").on("change",function(){$("#imageform2").ajaxForm({target:"#preview2",beforeSubmit:function(){$("#imageloadstatus2").show(),$("#imageloadbutton2").hide()},success:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))},error:function(){$("#imageloadstatus2").hide(),$("#imageloadbutton2").show(),resetFormElement($("#photoimg2"))}}).submit()}),$(".like-button").show(),$(document).on("click",".likebutton",function(){var e=$(this).parents(".comment")[0],t=$(this).attr("data-id"),a=$(this).attr("data-author-id"),i=$(this).attr("data-article-id"),o=$(this).attr("data-type"),n=$(this);$.post("/includes/ajax/like.php",{comment_id:t,author_id:a,article_id:i,type:o,sta:n.find("span").text().toLowerCase()},function(a){if("liked"==a.result){var i=(s=$("#"+t+" div.likes")).find(".total_likes"),o=s.find(".who-likes"),l=', <a class="who_likes fancybox.ajax" data-fancybox-type="ajax" href="/includes/ajax/who_likes.php?comment_id='+t+'">Who?</a>';i.text(a.total),o.html(l),"none"==$(s).css("display")&&s.show(),(r=$(e).find(".likebutton span")).text("Unlike").removeClass("like").addClass("unlike")}else if("unliked"==a.result){var s=$("#"+t+" div.likes"),i=s.find(".total_likes"),o=s.find(".who-likes"),l="";a.total>0?(l=', <a class="who_likes fancybox.ajax" data-fancybox-type="ajax" href="/includes/ajax/who_likes.php?comment_id='+t+'">Who?</a>',i.text(a.total),o.html(l)):s.hide();var r=$(e).find(".likebutton span");r.text("Like").removeClass("unlike").addClass("like")}else"nope"==a.result&&n.qtip({content:{text:'You need to be <a href="/index.php?module=login">logged in</a> to like a post. Or <a href="/index.php?module=register">register</a> to become a GOL member'},position:{my:"bottom center",at:"top center"},style:{classes:"qtip-bootstrap qtip-shadow"},hide:{delay:2e3},show:!0})})}),$(document).on("click",".likearticle",function(){var e=$(this).parents(".article_likes")[0],t=$(this).attr("data-id"),a=$("#article-likes"),i=$(this).attr("data-type"),o=$(this);$.post("/includes/ajax/like.php",{article_id:t,type:i,sta:o.find("span").text().toLowerCase()},function(i){if("liked"==i.result){var n=a.html().replace(" Likes",""),l="";(n=parseInt(n)+1)>0&&(l=', <a class="who_likes fancybox.ajax" data-fancybox-type="ajax" href="/includes/ajax/who_likes.php?article_id='+t+'">Who?</a>'),$("#who-likes-article").html(l),a.html(n+" Likes"),(s=$(e).find(".likearticle span")).text("Unlike").removeClass("like").addClass("unlike")}if("unliked"==i.result){var n=a.html().replace(" Likes",""),l="";(n=parseInt(n)-1)>0&&(l=', <a class="who_likes fancybox.ajax" data-fancybox-type="ajax" href="/includes/ajax/who_likes.php?article_id='+t+'">Who?</a>'),$("#who-likes-article").html(l),a.html(n+" Likes");var s=$(e).find(".likearticle span");s.text("Like").removeClass("unlike").addClass("like")}else"nope"==i.result&&o.qtip({content:{text:'You need to be <a href="/index.php?module=login">logged in</a> to like a post. Or <a href="/index.php?module=register">register</a> to become a GOL member'},position:{my:"bottom center",at:"top center"},style:{classes:"qtip-bootstrap qtip-shadow"},hide:{delay:2e3},show:!0})})}),$(".bookmark-content").click(function(e){e.preventDefault();var t=$(this).data("id"),a=$(this).data("type"),i=$(this).data("method"),o=$(this).data("page"),n=$(this).data("parent-id"),l=$(this);$.post("/includes/ajax/bookmark-content.php",{id:t,type:a,method:i,parent_id:n},function(e){"added"==e.result?(l.data("method","remove"),l.addClass("bookmark-saved"),l.attr("title","Remove Bookmark")):(e.result="removed")&&("usercp"!=o?(l.data("method","add"),l.removeClass("bookmark-saved"),l.attr("title","Bookmark")):"usercp"==o&&l.parent().parent().parent().fadeOut(500))})});$(".delete_notification").click(function(e){e.preventDefault();var t=$(this).data("note-id");$.post("/includes/ajax/delete-notification.php",{note_id:t},function(e){1==(e=JSON.parse(e)).result&&($("#note-"+t+" img").hasClass("envelope")&&$("#notes-counter").html(parseInt($("#notes-counter").html(),10)-1),$("#note-"+t).find("span").remove(),$("#note-"+t).fadeOut(500),0===parseInt($("#notes-counter").text())&&($("#alert_box").toggleClass("alerts-box-new alerts-box-normal"),$("#notes-counter").remove()))})});$(".poll_content").on("click",".close_poll",function(){var e=$(this).data("poll-id");$.post("/includes/ajax/close_poll.php",{poll_id:e},function(t){1==t.result?($(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e}),window.alert("Poll closed!")):2==t.result&&window.alert("Sorry, I am unable to do that.")})}),$(".poll_content").on("click",".open_poll",function(){var e=$(this).data("poll-id");$.post("/includes/ajax/open_poll.php",{poll_id:e},function(t){1==t.result?($(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e}),window.alert("Poll opened!")):2==t.result?($(".poll_content").load("/includes/ajax/poll_options.php",{poll_id:e}),window.alert("Poll opened!")):3==t.result&&window.alert("Sorry, I am unable to do that.")})}),$(".poll_content").on("click",".results_button",function(){var e=$(this).data("poll-id");$(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:e})}),$(".poll_content").on("click",".poll_button_vote",function(){var e=$(this),t=$(this).data("poll-id"),a=$(this).data("option-id");$.post("/includes/ajax/poll_vote.php",{poll_id:t,option_id:a},function(a){1==a.result?$(".poll_content").load("/includes/ajax/poll_results.php",{poll_id:t}):2==a.result?window.alert("Sorry, but voting is closed!"):3==a.result?window.alert("Sorry, but you have already voted in this poll!"):(e.text("Try again later, something broke").attr("disabled","disabled"),setTimeout(function(){e.removeAttr("disabled")},2e3))})}),$(".poll_content").on("click",".back_vote_button",function(){var e=$(this).data("poll-id");$(".poll_content").load("/includes/ajax/poll_options.php",{poll_id:e})}),$(document).on("click","#claim_key",function(e){e.preventDefault();var t=$(this).attr("data-game-id");$.post("/includes/ajax/claim_key.php",{giveaway_id:t},function(e){console.log(e.result),1==e.result&&$("#key-area").text("Here's your key: "+e.key),3==e.result&&$("#key-area").text("You have to login to redeem a key!")})}),$(document).on("click","#pc_info_update",function(e){e.preventDefault(),$.post("/includes/ajax/pc-info-update.php",function(e){1==e.result&&($("#pc_info_done").show(),$("#pc_info_done").html("<br />Thank you, your PC info has been updated!"))})}),$(".votebutton").click(function(){var e=$(this),t=$(this).data("category-id"),a=$(this).data("game-id");$.post("/includes/ajax/goty_vote.php",{category_id:t,game_id:a},function(t){1==t.result?($(e).html("Vote Saved!"),$(e).addClass("vote_done"),$.fancybox.open({type:"inline",href:"#wrap"})):2==t.result?(document.getElementById("wrap_text").innerHTML="Sorry, but voting is closed!",$.fancybox.open({type:"inline",href:"#wrap"})):3==t.result?(document.getElementById("wrap_text").innerHTML="Sorry, but you have already voted in this category!",$.fancybox.open({type:"inline",href:"#wrap"})):(e.text("Try again later, something broke").attr("disabled","disabled"),setTimeout(function(){e.removeAttr("disabled")},2e3))})}),$(".uploads").on("click",".add_button",function(){var e=$(this).data("bbcode");$(".bbcode_editor").val($(".bbcode_editor").val()+e)}),$("#generate_preview").click(function(){var e=$(this).data("article-id");$.post("/includes/ajax/generate_preview_code.php",{article_id:e}).done(function(e){$("#preview_code").val(e)})}),$(document).on("click","#subscribe-link",function(e){e.preventDefault();var t=$(this).attr("data-sub"),a=$(this).attr("data-article-id");$.post("/includes/ajax/subscribe-article.php",{type:t,"article-id":a},function(e){var t=JSON.parse(e);"subscribed"==t.result?($("#subscribe-link").attr("data-sub","unsubscribe"),$("#subscribe-link").attr("href","/index.php?module=articles_full&amp;go=unsubscribe&amp;article_id="+a),$("#subscribe-link span").text("Unsubscribe from comments")):"unsubscribed"==t.result&&($("#subscribe-link").attr("data-sub","subscribe"),$("#subscribe-link").attr("href","/index.php?module=articles_full&amp;go=subscribe&amp;article_id="+a),$("#subscribe-link span").text("Subscribe to comments"))})}),$(document).on("click",".gallery_item",function(){var e=$(this).data("filename"),t=$(this).data("id");$("#preview2").html('<img src="/uploads/tagline_gallery/'+e+'" alt="image" />'),$.fancybox.close(),$.post("/includes/ajax/gallery_tagline_sessions.php",{id:t,filename:e})}),$("#preview_text_button").click(function(){var e=$(".bbcode_editor").val();$(".pm_text_preview").load("/includes/ajax/call_bbcode.php",{text:e},function(){$(".preview_pm").show(),$("#preview").scrollMinimal(),$(".preview_pm").highlight()})}),$(".admin_article_comment_button").click(function(e){e.preventDefault();$.ajax({type:"POST",url:"/includes/ajax/article_comment_pagination.php",dataType:"json",data:$("#admin_comment").serialize(),success:function(e){"done"==e.result&&($(".comments").load("/includes/ajax/article_comment_pagination.php",{type:"reload",article_id:e.article_id,page:e.page},function(){$(".comments #r"+e.comment_id).scrollMinimal(),$(".comments").highlight()}),$("#comment").val("")),"error"==e.result&&alert(e.message)}}).done(function(){$(".admin_article_comment_button").prop("disabled",!1)})}),$(".send_admin_comment").click(function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({type:"POST",url:"/includes/ajax/admin/admin_home_comment.php",dataType:"json",data:t.serialize(),success:function(e){"done"==e.result?($(t).removeClass("dirty"),$("."+e.type+"_text").val(""),$("."+e.type+"_comments_list").html(e.text),$("."+e.type+"_comments_div").highlight()):alert(e.message)}})}),$(document).on("click","ul.pagination li a, .head-list-position a",function(t){e(t,$(this))}),$(document).on("change",".head-list-position select, .pagination",function(t){if(!e(t,$(this).find(":selected"))){var a=$(this).val();a&&(window.location=a)}}),$("#preview_chart").click(function(){var e=document.getElementById("chart_form"),t=new FormData(e);$.ajax({url:"/includes/ajax/preview_chart.php",data:t,cache:!1,processData:!1,contentType:!1,type:"POST",success:function(e){$(".chart_preview").html(e)}})});var l=$(".labels").length,s=$(".colours").length,r=$(".data").length;$(document).on("click","#add_label",function(){l++,s++,r++,$("#label_container").append('<div id="label-'+l+'" class="input-field box fleft" style="width: 50%"><span class="addon">Label #'+l+':</span><input type="text" class="labels" name="labels[]" placeholder="label '+l+'" /></div><div id="colour-'+l+'" class="input-field box fleft" style="width: 50%"><span class="addon">Colour #'+l+':</span><input class="colours" type="text" name="colours[]" placeholder="#ffffff" /></div>'),1==$("#chart_grouped").prop("checked")?$("#data_container").append('<div id="data-'+r+'" class="box">Data for Label #'+r+'<textarea class="data" name="data-'+r+'" cols="100" rows="10"></textarea></div>'):$("#data_container").append('<div id="data-'+r+'" class="box">Data for Label #'+r+'<input class="data" type="text" name="data-'+r+'" /></div>')}),$(document).on("click","#remove_label",function(){$("#label-"+l).remove(),$("#colour-"+s).remove(),$("#data-"+r).remove(),l--,s--,r--}),$(document).on("click","#chart_grouped",function(){1==$(this).prop("checked")?$("input.data").each(function(){var e=$(this).attr("name"),t=$(document.createElement("textarea")).attr("class","data").attr("name",e).attr("rows",10);$(this).replaceWith(t)}):$("textarea.data").each(function(){var e=$(this).attr("name"),t=$(document.createElement("input")).attr("class","data").attr("name",e).attr("type","text");$(this).replaceWith(t)})}),$(".admin_preview_article").click(function(e){e.preventDefault();"none"==$("#article_preview").css("display")?$.ajax({type:"POST",url:"/includes/ajax/admin/preview_article.php",data:$("#article_editor").serialize(),success:function(e){$("#article_preview").html(e),$("#article_preview").show(),$(".admin_preview_article").html("Close Preview"),$("#article_preview").scrollMinimal()}}):($("#article_preview").hide(),$(".admin_preview_article").html("Preview"))}),$(document).on("click",".quote_function",function(e){e.preventDefault();var t=$(this).attr("data-id"),a=$(this).attr("data-type");$.ajax({type:"POST",url:"/includes/ajax/quote_comment.php",dataType:"json",data:{id:t,type:a},success:function(e){"done"==e.result&&(content="[quote="+e.username+"]"+e.text,content+="[/quote]",$("#comment").append(content),$("#comment").scrollMinimal()),"error"==e.result&&alert(e.message)}})})});
