function gol_editor(e){function t(e){for(var t=document.querySelectorAll("#"+r+" .styles ul li[data-tag]"),i=document.querySelectorAll("#"+r+" .styles ul li[data-snippet]"),o=0;o<t.length;o++)t[o].editor_id=e,t[o].addEventListener("click",n,!1);for(var a=0;a<i.length;a++)i[a].editor_id=e,i[a].addEventListener("click",l,!1)}function n(){var e=this.dataset.tag;this.dataset.subtag?o(e,this.dataset.subtag):o(e)}function l(){a(this.dataset.snippet)}function i(e){return e="[li]"+e.replace(/\r\n/g,"\r\n[/li]").replace(/[\r\n]/g,"[/li]\r\n[li]")+"[/li]",list_nospaces=e.replace(/\[li\] +/gm,"[li]"),list_nospaces}function o(e,t){var n,l,o;t=void 0!==t?"="+t:"",s.focus(),void 0!==s.selectionStart?n=s.value.slice(s.selectionStart,s.selectionEnd):document.selection&&"Control"!=document.selection.type&&(n=document.selection.createRange().text),"list"==e&&(list_data=i(n),n=list_data,e="ul"),null!==(o=c(e,t,n))&&void 0!==o&&(l="["+(e=o[0])+(t=o[1])+"]"+(n=o[2])+"[/"+e+"]",document.execCommand("insertText",!1,l)||(s.value=s.value.slice(0,s.selectionStart)+l+s.value.slice(s.selectionEnd)))}function a(e){var t,n;s.focus(),void 0!==s.selectionStart?t=s.value.slice(s.selectionStart,s.selectionEnd):document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),popUpData=c(e,t),null!==popUpData&&"undefined"!=typeof popUpData&&(n=(e=popUpData[0])+(t=popUpData[1]),document.execCommand("insertText",!1,n)||(s.value=s.value.slice(0,s.selectionStart)+n+s.value.slice(s.selectionEnd)))}function u(e){var t,n=document.getElementById("youtube-bbcode").getAttribute("data-limit");return""===e&&(e=window.prompt("Enter YouTube URL, limited to "+n+" per post")),null!=e?(t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i),null===t?null:t[1]):null}function c(e,t,n){if("youtube"==e){if(null===(n=u(n)))return null}else if("url"==e&&""!=n){if(null===(t=window.prompt("Enter a valid URL"))||""===t)return null;t="="+t}else if("url"==e&&""===n){if(null===(t=window.prompt("Enter a valid URL"))||""===t)return null;t="="+t,null!==(n=window.prompt("URL link text"))&&""!==n||(n="link")}return[e,t,n]}var r="bar_"+e,s=document.getElementById(e);document.onkeydown=function(t){if(document.getElementById(e)===document.activeElement){var n=t.keyCode||t.which;if(t.ctrlKey)switch(n){case 66:t.preventDefault(),o("b");break;case 73:t.preventDefault(),o("i");break;case 85:t.preventDefault(),o("u");break;case 76:t.preventDefault(),o("url")}}},t(r)}
